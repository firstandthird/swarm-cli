#!/bin/bash
if [ "$1" == "_description" ]; then
  echo "[serviceName] [?image]"
  exit
fi

main() {
  local serviceName=$1
  local image=$2
  if test -z "$serviceName"; then
    log "No service passed in, listing services"
    . $DIR/swarm-shell docker service ls
    exit
  fi
  log "Updating $serviceName"
  . $DIR/swarm-shell "\
    docker service update \
    ${image:+ --image ${image}} \
    --force \
    --detach=false \
    --with-registry-auth \
    $serviceName
  "
}
main "$@"

